<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Your Travel Map | Voyago</title>
    <link rel="stylesheet" href="exploremaps.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  </head>
  <body>
    <header class="map-hero">
      <h1>Your World, One Memory at a Time</h1>
      <p>Every pin here exists because you lived it.</p>
    </header>

    <section class="map-container">
      <div id="travelMap"></div>
    </section>

    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script>
      const map = L.map("travelMap").setView([20.5937, 78.9629], 4);

      L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
        maxZoom: 18,
      }).addTo(map);

      // Custom marker
      const markerIcon = new L.Icon({
        iconUrl:
          "https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-violet.png",
        shadowUrl:
          "https://unpkg.com/leaflet@1.7.1/dist/images/marker-shadow.png",
        iconSize: [25, 41],
        iconAnchor: [12, 41],
        popupAnchor: [1, -34],
      });

      const trips = JSON.parse(localStorage.getItem("trips")) || [];

      if (trips.length === 0) {
        alert("No memories yet. Write one first.");
      }

      trips.forEach((trip) => {
        if (!trip.lat || !trip.lon) return;

        L.marker([trip.lat, trip.lon], { icon: markerIcon }).addTo(map)
          .bindPopup(`
      <b>${trip.title}</b><br>
      ${trip.location}<br>
      <small>${trip.date}</small>
    `);
      });
    </script>
  </body>
</html>
